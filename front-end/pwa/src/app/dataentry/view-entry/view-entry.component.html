<div class="card border-0">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs">
      <li class="nav-item">
        <a class="nav-link active" href="#">Edit Data</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Missing Data</a>
      </li>
    </ul>
  </div>

  <div class="card-body p-0 mt-2">
    <div class="card-header mb-2 p-1 fw-bold">Filter</div>
    <div class="row g-2 px-2">
      <div class="col-auto mb-2">
        <app-station-single-input [label]="'Station'" [(selectedId)]="stationId" />
      </div>

      <div class="col-auto mb-2">
        <app-element-single-input [label]="'Element'" [(selectedId)]="elementId" />
      </div>

      <div class="col-auto mb-2">
        <app-source-single-input [label]="'Source'" [(selectedId)]="sourceId" />
      </div>

      <div class="col-auto mb-2">
        <app-period-single-input [label]="'Period'" [(selectedId)]="period" />
      </div>

      <div class="col-auto mb-2">
        <div class="row">
          <app-radio-buttons-input [inline]="true" [asButtons]="false" [groupName]="'filter_dates'"
            [groupItems]="[{ label:'Observation Date', checked:  true},{ label:'Entry Date'}]"
            (checkedValueChange)="onDateToUseSelection($event)" />
        </div>
        <div class="row">
          <div class="col-auto">
            <app-date-input [id]="'from_date'" [(value)]="fromDate" />
          </div>
          <div class="col-auto d-flex align-items-center ">To</div>
          <div class="col-auto">
            <app-date-input [id]="'to_date'" [(value)]="toDate" />
          </div>
        </div>

      </div>



    </div>

    <div class="d-flex justify-content-end mb-2 me-1">
      <button type="button" class="btn btn-outline-secondary btn-sm me-2" (click)="refresh()">
        Refresh
      </button>
    </div>

    <div class="card-header  d-flex justify-content-between px-0 py-1 align-items-center">
      <div class="fw-bold ms-1">Showing Entries</div>
      <div *ngIf="pageInputDefinition.totalRowCount" class="d-flex">
        <button type="button" class="btn btn-outline-secondary btn-sm mx-2">
          Advanced Edit
        </button>
        <app-page-input [pageInputDefinition]="pageInputDefinition" (pageInputDefinitionChange)="loadData()" />
      </div>

    </div>

    <div class="mt-2 entry-table-container">
      <table class="table table-striped table-sm test-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Station</th>
            <th>Element</th>
            <th>Source</th>
            <th>Elevation</th>
            <th>Date Time (UTC)</th>
            <th>Period</th>
            <th>Value & Flag</th>
            <th>Entry Date Time (UTC)</th>
          </tr>
        </thead>
        <tbody class="table-group-divider  overflow-y-scroll">

          <tr *ngFor="let obsDef of observationsDefs; let i = index;">
            <td>{{i + 1}}</td>
            <td> {{ asViewObservationModel(obsDef).stationName }}</td>
            <td>{{ asViewObservationModel(obsDef).elementAbbrv }}</td>
            <td>{{ asViewObservationModel(obsDef).sourceName }}</td>
            <td>{{ obsDef.observation.elevation }}</td>
            <td>{{ getFormattedDatetime(obsDef.observation.datetime) }}</td>
            <td>{{ obsDef.observation.period }}</td>
            <td>
              <div class="px-2">
                <app-value-flag-input [id]="i + ''" [displayHistoryOption]="true" [observationDefinition]="obsDef" />
              </div>

            </td>
            <td>{{ getFormattedDatetime(asViewObservationModel(obsDef).entryDatetime) }}</td>
          </tr>
        </tbody>
      </table>
    </div>


  </div>

  <div class="card-footer bg-transparent d-flex justify-content-end px-0">
    <button type="button" class="btn btn-sm btn-outline-primary me-2" [disabled]="!enableSave" (click)="onSave()">
      Submit
    </button>

  </div>
</div>